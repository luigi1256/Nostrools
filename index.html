<!DOCTYPE html>
<html>
  <head>
    <title>Convertitore audio con sottotitoli</title>
    <link href="https://vjs.zencdn.net/7.11.4/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.11.4/video.js"></script>
  </head>
  <body>
    <h1>Convertitore audio con sottotitoli</h1>
    <form>
      <label for="audio_file">Seleziona il file audio:</label>
      <input type="file" id="audio_file" name="audio_file" accept="audio/*" required><br><br>
      <label for="subtitle_file">Seleziona il file dei sottotitoli:</label>
      <input type="file" id="subtitle_file" name="subtitle_file" accept=".srt" required><br><br>
      <input type="submit" value="Converti">
    </form>
    <br>
    <div id="video_player"></div>
    <script>
      // quando viene inviato il form, crea il player video
      const form = document.querySelector('form');
      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const audioFile = document.getElementById('audio_file').files[0];
        const subtitleFile = document.getElementById('subtitle_file').files[0];
        
        // crea il player video
        const videoPlayer = videojs('video_player', {
          controls: true,
          preload: 'auto'
        });
        
        // aggiungi il file audio e i sottotitoli
        videoPlayer.src({
          type: 'audio/mp3',
          src: URL.createObjectURL(audioFile),
          textTracks: [{
            kind: 'subtitles',
            src: URL.createObjectURL(subtitleFile),
            srclang: 'it',
            label: 'Italiano'
          }]
        });
        
        // rimuovi il form dalla pagina
        form.style.display = 'none';
      });
    </script>
  </body>
</html>
